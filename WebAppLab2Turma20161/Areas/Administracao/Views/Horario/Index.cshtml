@model PagedList.IPagedList<WebAppLab2Turma20161.Models.Horario>
@using PagedList
@using PagedList.Mvc 

@{
    ViewBag.Title = "Horários";
}

<h2><b>Lista de Horários</b></h2>

<div class="modal" id="modal">

</div>

<form class="text-right" method="get" action="/Administracao/Horario/ConsultarCliente">
    <p>
        <input type="search" placeholder="Pesquisar Cliente" name="nomeCliente" />
        <button type="submit" value="Pesquisar" class="btn btn-info btn-circle"><i class="glyphicon glyphicon-search"></i></button>
        <button type="submit" value="Mostrar Todos" class="btn btn-warning btn-circle"><i class="glyphicon glyphicon-remove"></i></button>

    </p>
</form>

<button class="btn btn-default create"><i class="glyphicon glyphicon-new-window"></i>Novo Horário</button>


@if (TempData["Mensagem"] != null)
{

    <p class="alert-success">@TempData["Mensagem"]</p>

}

<table class="table">
    <tr>
        <th>
            @Html.ActionLink("Cliente", "Index", new { ordenacao = ViewBag.NomeParam })
        </th>
        <th>
            @Html.ActionLink("Serviço", "Index", new { ordenacao = ViewBag.DescricaoParam })
        </th>
        <th>
            @Html.ActionLink("Data de Atendimento", "Index", new { ordenacao = ViewBag.DataParam })
        </th>
        <th>
            @Html.ActionLink("Horário de Atendimento", "Index", new { ordenacao = ViewBag.HorarioParam })
        </th>
        
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.NomeUsuarioCliente)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Descricao)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DataAtendimento)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.HorarioAtendimento)
        </td>
     
        <td>
          @*  @Html.ActionLink("Editar", "Edit", new { id=item.HorarioID }) |
            @Html.ActionLink("Detalhes", "Details", new { id=item.HorarioID }) |
            @Html.ActionLink("Excluir", "Delete", new { id=item.HorarioID }) *@
            <button class="btn btn-default details" data-id="@item.HorarioID"><i class="glyphicon glyphicon-file"></i></button>
            <button class="btn btn-danger delete" data-id="@item.HorarioID"><i class="glyphicon glyphicon-trash"></i></button>
            <button class="btn btn-primary edit" data-id="@item.HorarioID"><i class="glyphicon glyphicon-edit"></i></button>
        </td>
    </tr>
}

</table>

@section scripts{

    <script>
        $(function () {

            $(".details").click(function () {
                var id = $(this).attr("data-id");
                $("#modal").load("/Administracao/Horario/Details?id=" + id, function () {
                    $("#modal").modal();
                })
            });

            $(".edit").click(function () {
                var id = $(this).attr("data-id");
                $("#modal").load("/Administracao/Horario/Edit?id=" + id, function () {
                    $("#modal").modal();
                })
            });

            $(".delete").click(function () {
                var id = $(this).attr("data-id");
                $("#modal").load("/Administracao/Horario/Delete?id=" + id, function () {
                    $("#modal").modal();
                })
            });

            $(".create").click(function () {
                $("#modal").load("/Administracao/Horario/Create", function () {
                    $("#modal").modal();
                 })

            });

        })


    </script>
}




Página @Model.PageNumber de @Model.PageCount
@Html.PagedListPager(Model, Page => Url.Action("Index", new { pagina = Page, ordenacao = ViewBag.OrdenacaoAtual }))
